var $swipe=$(".swipe"),$swipe__button=$swipe.find(".swipe__button"),$ad=$(".ad"),$ad__img=$ad.find("img"),$clickTag=$ad.attr("data-clicktag"),submit=new DTMSwipeCart($swipe).SwipeCart,fx={duration:500,easing:"cubic-bezier(0.52, 1.64, 0.37, 0.66)"},exitOnSwipe=!0,clickOverlap=!0,redirectTo=function(e){null==window.open(e,"_blank")&&(console.log("Pop up was blocked using window.open"),submit.setBeforeState(),clickOverlap=!1)},getExitTag=function(){switch(!0){case"string"==typeof clickTAG:return clickTAG;case"string"==typeof clickTag:return clickTag;case"string"==typeof $clickTag:return $clickTag;default:console.log("clickTag not set")}},url=getExitTag();$swipe.on("swipe:end",function(e){e.swipe.setLock=!0,e.swipe.setAfterState(),exitOnSwipe&&clickOverlap&&redirectTo(url)}),$swipe.on("click",function(){clickOverlap=!0,exitOnSwipe=!0,submit.gotoEnd(fx)}),$ad.attr("href",url).on("click",function(e){var i=e.target.closest(".ad__button");exitOnSwipe=!!i,(clickOverlap=!1)||submit.gotoEnd(fx)}),"undefined"!=typeof Modernizr&&void 0!==Modernizr.shapes&&(Modernizr.shapes?$ad.addClass("shapes"):$ad.addClass("no-shapes"));