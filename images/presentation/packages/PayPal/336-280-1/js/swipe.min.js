!function(){$("body");var t=function(){var t=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()};window.DTMSwipeCartTemplate=function(e){var i=new $.Deferred,s=$("<div/>");(e=e||{}).insertionMethod=e.insertionMethod||"insertAfter",e.$target=e.$target||$("#AcceptOfferButton"),e.$cssTarget=e.$cssTarget||$("#DTMFWJS"),e.cssInsertionMethod=e.cssInsertionMethod||"appendTo",e.url=e.url||{},e.url.html=e.url.html||"/shared/swipe/swipe.html",e.url.initIcon=e.url.initIcon||"/shared/swipe/images/cart-icon-init.svg",e.url.termIcon=e.url.termIcon||"/shared/swipe/images/cart-icon-term.svg",e.url.css=e.url.css||"/shared/swipe/css/swipe.css",e.data=e.data||{};var a=function(t,e){try{var i=new RegExp(/{([a-zA-Z]*?)}/,"g")}catch(t){i=new RegExp("\\{([a-zA-Z]*?)}","g")}for(var s=i.exec(t),a=t;null!==s&&"string"==typeof s[0]&&"string"==typeof s[1];)void 0!==e[s[1]]&&(a=a.replace(s[0],e[s[1]])),s=i.exec(t);return a},n=t(),r=function(){$.when($.get(e.url.html),$.get(a(e.url.initIcon,e.url)),$.get(a(e.url.termIcon,e.url))).done(function(t,r,o){s=s.html(t[0]),"string"==typeof e.data.initState&&s.find(".swipe__init__text .swipe__text").text(a(e.data.initState,e.data)),"string"==typeof e.data.termState&&s.find(".swipe__term__text .swipe__text").text(a(e.data.termState,e.data)),"string"==typeof e.data.beforeState&&s.find(".swipe__term__text").attr("data-swipe-before",a(e.data.beforeState,e.data)),"string"==typeof e.data.afterState&&s.find(".swipe__term__text").attr("data-swipe-after",a(e.data.afterState,e.data)),s.find(".swipe__button__init").html(r[0].childNodes[0]),s.find(".swipe__button__term").html(o[0].childNodes[0]),s=s.find(".swipe").attr("data-swipe-group-uuid",n);try{e.$target.length>1?(e.$target.each(function(){s=s.clone();var t=$(this);s[e.insertionMethod](t)}),s=$('[data-swipe-group-uuid="'+n+'"]')):s[e.insertionMethod](e.$target),e.$swipe=s,s.trigger({type:"swipe:ready",swipe:e}),i.resolve(s)}catch(t){s.trigger({type:"swipe:reject",swipe:e}),i.reject()}}).fail(function(){console.log("the template could not be loaded for "+e.$target.selector)})};if(0===$('link[id="DTMSWIPECSS"]').length){$("<link/>",{type:"text/css",id:"DTMSWIPECSS",rel:"stylesheet",href:e.url.css})[e.cssInsertionMethod](e.$cssTarget);$("#DTMSWIPECSS").on("load",function(){r()})}else r();return i.promise()},window.DTMSwipeCart=function(e){var i=this,s=function(e){var i,s=this,a=$(window).width(),n=(e=e).find(".swipe__in"),r=e.find(".swipe__button"),o=e.find(".swipe__term"),d=e.find(".swipe__init__text"),c=e.find(".swipe__term__text"),p={},u={opacity:{},translateX:0},l=function(){var t="data-swipe-api-key",i=e.attr(t),s=$("["+t+'="'+e.attr(t)+'"]').length;return void 0===i&&e.attr(t,"swipe"+$("["+t+"]").length),void 0!==i&&s>1&&e.attr(t,i+s),e.attr(t)};s.uuid=t(),s.apikey=l();var h=function(t){u.termClipPath=void 0!==t?t:u.width-(u.translateX+r.outerWidth()/2),o.css({"-webkit-clip-path":"inset(0 "+u.termClipPath+"px 0 0)","clip-path":"inset(0 "+u.termClipPath+"px 0 0)"}),o.hasClass("swipe--is-hidden")&&o.removeClass("swipe--is-hidden")},w=function(){i=void 0,u.translateX=p.touchmovex-p.touchstartx,u.translateX<0&&(u.translateX=0),u.translateX>s.getEndPoint()&&(u.translateX=s.getEndPoint()),s.setLock||(u.opacity.x=0+.005*u.translateX,u.opacity.y=1-.005*u.translateX,u.opacity.x=u.opacity.x>1?1:u.opacity.x<0?0:u.opacity.x,u.opacity.y=u.opacity.y>1?1:u.opacity.y<0?0:u.opacity.y,h(),r.css({transform:"translateX("+u.translateX+"px)"}),d.css("opacity",u.opacity.y),c.css("opacity",u.opacity.x))},f=function(t){if(void 0!==i)try{s[i]()}catch(t){console.log(t.message)}else u.translateX<u.width*s.threshold?s.gotoStart():s.gotoEnd()},g=function(){r.addClass("swipe__button--resistance"),o.addClass("swipe__term--resistance")};s.threshold=.5,s.setLock=!1,s.gotoStart=function(){i="gotoStart",g(),r.removeAttr("style"),o.removeAttr("style"),h(u.width),s.unbindStates(),e.addClass("swipe--is-start").removeClass("swipe--in-motion"),r.css("transform","translateX(0)"),d.css("opacity",1),c.css("opacity",1),e.trigger({type:"swipe:start",swipe:s})},s.gotoEnd=function(t){t=t||{},i="gotoEnd",g(),"number"==typeof t.duration&&(t.easing=t.easing||"linear",r.css({"transition-duration":.95*t.duration+"ms","transition-timing-function":t.easing}),o.css({"transition-duration":t.duration+"ms","transition-timing-function":t.easing})),h(0),s.unbindStates(),e.removeClass("swipe--is-start").addClass("swipe--in-motion"),r.css("transform","translateX("+s.getEndPoint()+"px)"),d.css("opacity",0),c.css("opacity",1),e.trigger({type:"swipe:end",swipe:s})},s.setBeforeState=function(){o.removeAttr("style"),e.removeClass("swipe--has-after-mode").addClass("swipe--has-before-mode")},s.setAfterState=function(){o.removeAttr("style"),e.removeClass("swipe--has-before-mode").addClass("swipe--has-after-mode")},s.unbindStates=function(){s.setLock||e.removeClass("swipe--has-before-mode swipe--has-after-mode")},s.set=function(t){a=(t=t||{}).updateCachedWidth||a,e=$('[data-swipe-uuid="'+s.uuid+'"]'),n=e.find(".swipe__in"),r=e.find(".swipe__button"),o=e.find(".swipe__term"),d=e.find(".swipe__init__text"),c=e.find(".swipe__term__text"),u.width=e.width(),u.height=e.height(),h(),f()},s.getEndPoint=function(){return Math.floor(n.width()-r.outerWidth())},e.attr("data-swipe-uuid",s.uuid),l(),s.set(),$(window).resize(function(){var t=$(window).width();t!==a&&s.set({updateCachedWidth:t})}),e.on("click",function(t){t.preventDefault(),e.trigger({type:"swipe:click",swipe:s})}),r.on("touchstart",function(t){p.touchstartx=t.originalEvent.touches[0].pageX}),r.on("touchmove",function(t){switch(p.touchmovex=t.originalEvent.touches[0].pageX,!0){case p.touchmovex>p.touchstartx:r.trigger({type:"swipe:right",swipe:t});break;case p.touchmovex<p.touchstartx:r.trigger({type:"swipe:left",swipe:t})}}),r.on("swipe:right",w),r.on("swipe:left",w),r.on("touchend",function(t){p.touchendx=t.originalEvent.pageX,s.setLock||f()}),r.on("transitionend",function(){r.removeClass("swipe__button--resistance"),o.removeClass("swipe__term--resistance")})};return e.each(function(){var t=new s($(this));i[t.apikey]=t}),i}}();